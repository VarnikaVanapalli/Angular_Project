<nav class="navbar navbar-expand-lg navbar-light">
  <div class="container">
    <a class="navbar-brand" href="#">
      <img src="tyre.png" alt="abhibus" class="logoimage">
      <h1>BusFever</h1>
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
          <a class="nav-link" href="#"><i class="icon bi bi-bus"></i>Buses</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#"><i class="icon bi bi-gift"></i>Offers</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#"><i class="icon bi bi-ticket-perforated"></i>Track Ticket</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#"><i class="icon bi bi-headset"></i>My Bookings</a>
        </li>
        <li><a class="login-btn" [routerLink]="['/login-page']">Get Started</a></li>
      </ul>
    </div>
    
  </div>
</nav>

  <div class="container">
    

    <!-- Search Form -->
    <section class="search-sec">
      <div class="container mt-5 d-flex justify-content-center">
        <form class="search-form d-flex align-items-center shadow-lg">
          <div class="row w-100 text-white">
            <!-- From Location -->
            <div class="col-md-3 d-flex align-items-center">
              <div class="input-group">
                <span class="input-group-text"><i class="bi-bus-front-fill"></i></span>
                <select 
                  class="form-select" 
                  name="fromLocation" 
                  [(ngModel)]="fromLocation" >
                  <!-- Placeholder for when fromLocation is null -->
                  <option value="" disabled [selected]="!fromLocation">Select From Location</option>
                  <!-- Iterate over locations and select the value if it matches fromLocation -->
                  <option *ngFor="let location of locations" [value]="location.id" [selected]="fromLocation === location.id">
                    {{ location.name }}
                  </option>
                </select>

              </div>
            </div>
  
            <!-- Arrow Icon -->
            <div class="col-md-1 text-center d-flex align-items-center justify-content-center">
              <i class="bi bi-arrow-left-right fs-4 text-black"></i>
            </div>
  
            <!-- To Location -->
            <div class="col-md-3 d-flex align-items-center">
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-bus-front"></i></span>
                <select 
                  class="form-select" 
                  name="toLocation" 
                  [(ngModel)]="toLocation">
                  <!-- Placeholder for when toLocation is null -->
                  <option value="" disabled [selected]="!toLocation">Select To Location</option>
                  <!-- Iterate over locations and select the value if it matches toLocation -->
                  <option *ngFor="let location of locations" [value]="location.id" [selected]="toLocation === location.id">
                    {{ location.name }}
                  </option>
                </select>

              </div>
            </div>
  
            <!-- Travel Date -->
            <div class="col-md-3 d-flex align-items-center">
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-calendar"></i></span>
                <input 
                  type="date" 
                  class="form-control" 
                  name="travelDate" 
                  [(ngModel)]="date" 
                  [value]="date ? (date | date:'yyyy-MM-dd') : null" 
                  placeholder="Date">

              </div>
            </div>
  
            <!-- Search Button -->
            <div class="col-md-2 text-center">
              <button 
                type="button" 
                class="btn btn-light w-100" 
                (click)="fetchAvailableBuses()"
                 >
                Search Buses
              </button>
            </div>
          </div>
        </form>
      </div>
    </section>
</div>


<div class="bg-con">
  <img src="japan-bus2.jpg" alt="" class="bg-image"/>
</div>
<!-- <app-movingbus></app-movingbus> -->

<div class="ab-con">
    <section id="buses-list" class="my-4">
        <div>
          <h2 class="mx-5"> Available Buses</h2>
        </div>
          
          <!-- @for (item of busList; track $index) { 
  
            <div class="row">
              <div class="col-12">
                  <div class="card mb-3 mt-3 p-3 rounded-5">
                      <div class="row g-0">
                        <div class="col-md-3 d-flex flex-column justify-content-center align-items-center">
                          <h5 class="card-title">Bharathi</h5>
                          <p class="card-text">A1 Travels</p>
                        </div>
                        <div class="col-md-9">
                          <div class="card-body row">
                            <div class="col-md-2">
                              <p class="card-text"><strong>{{"12.00" |  date:"hh:mm:ss"}}</strong></p>
                              <p class="card-text">Departure</p>
                            </div>
                            <div class="col-md-2">
                              <p class="card-text"><strong>16 hr</strong></p>
                              <p class="card-text">Duration</p>
                            </div>
                            <div class="col-md-2">
                              <p class="card-text"><strong>{{"9.00" |  date:"hh:mm:ss"}}</strong></p>
                              <p class="card-text">Arrival</p>
                              <p class="text-danger">{{"8.00" |  date:'dd-MM-yy'}}</p>
                            </div>
                            <div class="col-md-2">
                              <p class="card-text"><strong>4.5</strong> ⭐</p>
                              <p class="card-text">567 Ratings</p>
                            </div>
                            <div class="col-md-2">
                              <p class="card-text"><strong>INR 700</strong></p>
                              <p class="card-text">5 Seats available out of 25</p>
                            </div>
                            <div class="col-md-2 text-end">
                              <button class="btn btn-danger" [routerLink]="['/book-bus']">Book Seat</button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
              </div>
          </div>
          <div class="row">
            <div class="col-12">
                <div class="card mb-3 mt-3 p-3 rounded-5">
                    <div class="row g-0">
                      <div class="col-md-3 d-flex flex-column justify-content-center align-items-center">
                        <h5 class="card-title">Bharathi</h5>
                        <p class="card-text">A1 Travels</p>
                      </div>
                      <div class="col-md-9">
                        <div class="card-body row">
                          <div class="col-md-2">
                            <p class="card-text"><strong>{{"12.00" |  date:"hh:mm:ss"}}</strong></p>
                            <p class="card-text">Departure</p>
                          </div>
                          <div class="col-md-2">
                            <p class="card-text"><strong>16 hr</strong></p>
                            <p class="card-text">Duration</p>
                          </div>
                          <div class="col-md-2">
                            <p class="card-text"><strong>{{"9.00" |  date:"hh:mm:ss"}}</strong></p>
                            <p class="card-text">Arrival</p>
                            <p class="text-danger">{{"8.00" |  date:'dd-MM-yy'}}</p>
                          </div>
                          <div class="col-md-2">
                            <p class="card-text"><strong>4.5</strong> ⭐</p>
                            <p class="card-text">567 Ratings</p>
                          </div>
                          <div class="col-md-2">
                            <p class="card-text"><strong>INR 700</strong></p>
                            <p class="card-text">5 Seats available out of 25</p>
                          </div>
                          <div class="col-md-2 text-end">
                            <button class="btn btn-danger" [routerLink]="['/book-bus']">Book Seat</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <div class="card mb-3 mt-3 p-3 rounded-5">
                    <div class="row g-0">
                      <div class="col-md-3 d-flex flex-column justify-content-center align-items-center">
                        <h5 class="card-title">Bharathi</h5>
                        <p class="card-text">A1 Travels</p>
                      </div>
                      <div class="col-md-9">
                        <div class="card-body row">
                          <div class="col-md-2">
                            <p class="card-text"><strong>{{"12.00" |  date:"hh:mm:ss"}}</strong></p>
                            <p class="card-text">Departure</p>
                          </div>
                          <div class="col-md-2">
                            <p class="card-text"><strong>16 hr</strong></p>
                            <p class="card-text">Duration</p>
                          </div>
                          <div class="col-md-2">
                            <p class="card-text"><strong>{{"9.00" |  date:"hh:mm:ss"}}</strong></p>
                            <p class="card-text">Arrival</p>
                            <p class="text-danger">{{"8.00" |  date:'dd-MM-yy'}}</p>
                          </div>
                          <div class="col-md-2">
                            <p class="card-text"><strong>4.5</strong> ⭐</p>
                            <p class="card-text">567 Ratings</p>
                          </div>
                          <div class="col-md-2">
                            <p class="card-text"><strong>INR 700</strong></p>
                            <p class="card-text">5 Seats available out of 25</p>
                          </div>
                          <div class="col-md-2 text-end">
                            <button class="btn btn-danger" [routerLink]="['/booking']">Book Seat</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <div class="card mb-3 mt-3 p-3 rounded-5">
                    <div class="row g-0">
                      <div class="col-md-3 d-flex flex-column justify-content-center align-items-center">
                        <h5 class="card-title">Bharathi</h5>
                        <p class="card-text">A1 Travels</p>
                      </div>
                      <div class="col-md-9">
                        <div class="card-body row">
                          <div class="col-md-2">
                            <p class="card-text"><strong>{{"12.00" |  date:"hh:mm:ss"}}</strong></p>
                            <p class="card-text">Departure</p>
                          </div>
                          <div class="col-md-2">
                            <p class="card-text"><strong>16 hr</strong></p>
                            <p class="card-text">Duration</p>
                          </div>
                          <div class="col-md-2">
                            <p class="card-text"><strong>{{"9.00" |  date:"hh:mm:ss"}}</strong></p>
                            <p class="card-text">Arrival</p>
                            <p class="text-danger">{{"8.00" |  date:'dd-MM-yy'}}</p>
                          </div>
                          <div class="col-md-2">
                            <p class="card-text"><strong>4.5</strong> ⭐</p>
                            <p class="card-text">567 Ratings</p>
                          </div>
                          <div class="col-md-2">
                            <p class="card-text"><strong>INR 700</strong></p>
                            <p class="card-text">5 Seats available out of 25</p>
                          </div>
                          <div class="col-md-2 text-end">
                            <button class="btn btn-danger" [routerLink]="['/booking']">Book Seat</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
            </div>
        </div>
  
          } -->
        <!-- Buses List -->
  <section id="buses-list" class="my-4" *ngIf="busList && busList.length > 0">
    <div class="row" *ngFor="let item of busList">
      <div class="col-12">
        <div class="card mb-3">
          <div class="row g-0">
            <div class="col-md-3 d-flex flex-column justify-content-center align-items-center">
              <h5 class="card-title">{{ item.busName }}</h5>
            </div>
            <div class="col-md-9">
              <div class="card-body row">
                <div class="col-md-2">
                  <p class="card-text"><strong>{{ item.departureTime }}</strong></p>
                  <p class="card-text">Departure</p>
                </div>
                <div class="col-md-2">
                  <p class="card-text"><strong>{{ item.duration }}</strong></p>
                  <p class="card-text">Duration</p>
                </div>
                <div class="col-md-2">
                  <p class="card-text"><strong>{{ item.arrivalTime }}</strong></p>
                  <p class="card-text">Arrival</p>
                  <p class="text-danger">{{ item.arrivalDate }}</p>
                </div>
                <div class="col-md-2">
                  <p class="card-text"><strong>{{ item.rating }}</strong> ⭐</p>
                  <p class="card-text">{{ item.ratingsCount }} Ratings</p>
                </div>
                <div class="col-md-2">
                  <p class="card-text"><strong>INR {{ item.price }}</strong></p>
                  <p class="card-text">
                    {{ item.availableSeats }} Seats available out of {{ item.totalSeats }}
                  </p>
                </div>
                <div class="col-md-2 text-end">
                  <button class="btn btn-danger" [routerLink]="['/book-bus',item.busId]" >Book Seat</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
          
      </section>
      <router-outlet></router-outlet>
</div>



